[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/app/logs/nginx.log
stderr_logfile=/app/logs/nginx.error.log
priority=10

[program:flask]
command=python /app/backend/app.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/flask.log
stderr_logfile=/app/logs/flask.error.log
environment=PYTHONUNBUFFERED=1,FLASK_ENV=production
priority=20

[program:spotifyd]
command=/usr/local/bin/spotifyd --no-daemon --config-path /app/config/spotifyd.conf
autostart=false
autorestart=true
stdout_logfile=/app/logs/spotifyd.log
stderr_logfile=/app/logs/spotifyd.error.log
priority=30

[group:spotify-kids]
programs=nginx,flask,spotifyd
priority=999